<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Map Editor</title>
    </head>
    <body>
        <canvas id="mainCanvas" width="512" height="512"></canvas>
        <script>
            const canvas = document.getElementById("mainCanvas");
            const ctx = canvas.getContext("2d");
            ctx.translate(canvas.width / 2, canvas.height / 2)

            let map = [[]];

            const draw = function() {
                
                ctx.fillStyle = "#aaaaaa";
                ctx.fillRect(-canvas.width / 2, -canvas.height / 2, canvas.width, canvas.height);

                for(let elem of map) {

                    if(elem.length == 0) continue;

                    ctx.fillStyle = "#000000";
                    ctx.beginPath();
                    ctx.moveTo(elem[0][0], elem[0][1]);
                    for(let i = 1; i < elem.length; i++) {
                        ctx.lineTo(elem[i][0], elem[i][1]);
                    }
                    ctx.closePath();
                    ctx.fill();
                }

                requestAnimationFrame(draw);
            };

            draw();

            canvas.addEventListener("click", event => {
                let box = canvas.getBoundingClientRect();
                let x = event.clientX - box.left;
                let y = event.clientY - box.top;
                map[map.length - 1].push([x - canvas.width / 2, y - canvas.height / 2]);
            });
            
            window.addEventListener("keydown", event => {
                if(event.key === "f") {
                    map.push([]);
                }
            });

        </script>
    </body>
</html>